fragment challengeFields on Challenge {
  duel_id
  duelist_a
  duelist_b
  message
  round_number
  state
  timestamp_end
  timestamp_start
  winner
}

query getChallengesById($duel_id: u128!) {
  challenges: challengeModels(where: { duel_id: $duel_id }) {
    edges {
      node {
        ...challengeFields
      }
    }
  }
}

query getChallengesByState($state: u8!) {
  challenges: challengeModels(where: { state: $state }) {
    edges {
      node {
        ...challengeFields
      }
    }
  }
}

query getChallengesByDuelist($state: u8!, $address: ContractAddress!) {
  challenges_a: challengeModels(where: { state: $state, duelist_a: $address }) {
    edges {
      node {
        ...challengeFields
      }
    }
  }
  challenges_b: challengeModels(where: { state: $state, duelist_b: $address }) {
    edges {
      node {
        ...challengeFields
      }
    }
  }
}

query getChallengeDependencies($duel_id: u128, $duelist_a: ContractAddress, $duelist_b: ContractAddress) {
  wager: wagerModels(where: { duel_id: $duel_id }) {
    edges {
      node {
        coin
        fee
        value
      }
    }
  }
  duelist_a: duelistModels(where: { address: $duelist_a }) {
    edges {
      node {
        ...duelistFields
      }
    }
  }
  duelist_b: duelistModels(where: { address: $duelist_b }) {
    edges {
      node {
        ...duelistFields
      }
    }
  }
}
